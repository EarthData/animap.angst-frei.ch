"use strict";(self.webpackChunkanimap_angst_frei_ch=self.webpackChunkanimap_angst_frei_ch||[]).push([[179],{138:(o,e,n)=>{n(978),n(732),n(652),n(817),n(687),n(408),n(292),n(920),n(504),n(278),n(385);var r=n(243),l=n(755),a=n(460),s="https://docs.google.com/spreadsheets/d/1re8XrYP6eRMHGXMkAzEstO_VAQVw8sbIOhwFjy3Eyxg/edit#gid=0",d="AIzaSyA5IUHNyPZvWuCMTqvI4DJ2ygqDO5_t5Is",c=r.map("map",{preferCanvas:!0,fullscreenControl:{pseudoFullscreen:!1,position:"bottomleft"},attributionControl:!1,zoomControl:!1,scrollWheelZoom:!0,tap:!1}).setView([41.76,-72.69],11),g={notesSheetName:"Notes",optionsSheetName:"Options",pointsSheetName:"Points",polygonsSheetName:"Polygons",polylinesSheetName:"Polylines",_mapTitle:"Map Title",_mapSubtitle:"Map Subtitle",_mapTitleDisplay:"Display Title",_authorName:"Author Name",_authorURL:"Author Email or Website",_codeCredit:"Author Code Credit",_githubRepo:"Author Code Repo",_googleAnalytics:"Google Analytics Tracking ID",_tileProvider:"Basemap Tiles",_markercluster:"Cluster Markers",_introPopupText:"Intro Popup Text",_initZoom:"Initial Zoom",_initLat:"Initial Center Latitude",_initLon:"Initial Center Longitude",_mapSearch:"Search Button",_mapSearchCircleRadius:"Search Radius",_mapSearchZoom:"Search Results Zoom Level",_mapZoom:"Zoom Controls",_mapMyLocation:"Show My Location",_mapAttribution:"Credits and Attribution",_pointsLegendTitle:"Point Legend Title",_pointsLegendPos:"Point Legend Position",_pointsLegendIcon:"Point Legend Icon",_displayTable:"Display Table",_tableHeight:"Table Height",_tableColumns:"Table Columns",_tableHeaderColor:"Table Header Color",_polylinesLegendTitle:"Polyline Legend Title",_polylinesLegendPos:"Polyline Legend Position",_polylinesLegendIcon:"Polyline Legend Icon",_polylinesWeight:"Polyline Thickness",_polygonsLegendTitle:"Polygon Legend Title",_polygonsLegendPosition:"Polygon Legend Position",_polygonsLegendIcon:"Polygon Legend Icon",_polygonsGeojsonURL:"Polygon GeoJSON URL",_popupProp:"Property Popups, Labels",_polygonLayers:"Polygon Properties, Labels",_bucketDivisors:"Property Ranges",_colorScheme:"Property Range Color Palette",_colorOpacity:"Polygon Color Opacity",_outlineColor:"Polygon Outline Color",_bucketColors:"Property Range Manual Colors",_polygonDisplayImages:"Show Images When Available",_polygonLabel:"Show Polygon Labels",_polygonLabelZoomLevel:"Show Polygon Labels at Zoom Level",_polygonShowOnStart:"Show Polygon Data on Start"};l(window).on("load",(function(){var o,e={},n={},u=[],f=!1,h=!1,m=!1,y=0,v=0,_=[],L=[],b=[],P=[],C=[],T=[],k=[],S=[],w=[];function O(e){if(e<u.length&&R(e,"_polygonsGeojsonURL").trim()){y=e;var n=R(e,"_popupProp").split(";");for(i in n)n[i]=n[i].split(",");k.push(n),l.getJSON(R(e,"_polygonsGeojsonURL").trim(),(function(o){geoJsonLayer=r.geoJson(o,{onEachFeature:D,pointToLayer:function(o,e){return r.circleMarker(e,{className:"geojson-point-marker"})}}),P.push(geoJsonLayer),O(e+1)}))}else!function(){for(var e=0;e<u.length&&R(e,"_polygonsGeojsonURL").trim();){for(i in isNumerical=[],divisors=[],colors=[],polygonLayers=R(e,"_polygonLayers").split(";"),polygonLayers)polygonLayers[i]=polygonLayers[i].split(",");if(divisors=R(e,"_bucketDivisors").split(";"),divisors.length!=polygonLayers.length)return void alert("Error in Polygons: The number of sets of divisors has to match the number of properties");for(colors=R(e,"_bucketColors").split(";"),i=0;i<divisors.length;i++){for(divisors[i]=divisors[i].split(","),j=0;j<divisors[i].length;j++)divisors[i][j]=divisors[i][j].trim();colors[i]?colors[i]=colors[i].split(","):colors[i]=[]}for(i=0;i<divisors.length;i++){if(0==divisors[i].length)return void alert("Error in Polygons: The number of divisors should be > 0");if(0==colors[i].length)for(colors[i]=palette(U(e,"_colorScheme","tol-sq"),divisors[i].length),j=0;j<colors[i].length;j++)colors[i][j]="#"+colors[i][j].trim();else if(divisors[i].length!=colors[i].length)return void alert("Error in Polygons: The number of divisors should match the number of colors")}for(i=0;i<divisors.length;i++)if(isNaN(parseFloat(divisors[i][0].trim())))isNumerical[i]=!1;else for(isNumerical[i]=!0,j=0;j<divisors[i].length;j++)divisors[i][j]=parseFloat(divisors[i][j].trim());_.push(divisors),L.push(colors),b.push(isNumerical),T.push(polygonLayers);var n=U(e,"_polygonsLegendPosition","off");(o=r.control({position:"off"==n?"topleft":n})).onAdd=function(o){var n='<h6 class="pointer">'+R(e,"_polygonsLegendTitle")+"</h6>";for(i in n+="<form>",polygonLayers){var t=polygonLayers[i][1]?polygonLayers[i][1].trim():polygonLayers[i][0].trim();n+='<label><input type="radio" name="prop" value="'+e+";"+i+'"> ',n+=(t=""==t?"On":t)+"</label><br>"}n+='<label><input type="radio" name="prop" value="'+e+';-1"> Off</label></form><div class="polygons-legend-scale">';var l=r.DomUtil.create("div","leaflet-control leaflet-control-custom leaflet-bar ladder polygons-legend"+e);return l.innerHTML=n,l.innerHTML+="</div>",l},o.addTo(c),"off"==R(e,"_polygonsLegendPosition")&&l(".polygons-legend"+e).css("display","none"),C.push(o),e++}for(var i in w){var a=r.featureGroup(w[i]);S.push(a)}for(l('.ladder input:radio[name="prop"]').change((function(){y=parseInt(l(this).val().split(";")[0]),-1==(v=parseInt(l(this).val().split(";")[1]))?(l(".polygons-legend"+y).find(".polygons-legend-scale").hide(),c.hasLayer(P[y])&&(c.removeLayer(P[y]),c.hasLayer(S[y])&&c.removeLayer(S[y]))):I()})),t=0;t<e;t++)"on"==R(t,"_polygonShowOnStart")?l('.ladder input:radio[name="prop"][value="'+t+';0"]').click():l('.ladder input:radio[name="prop"][value="'+t+';-1"]').click();l(".polygons-legend-merged h6").eq(0).click().click(),h=!0}()}function I(){if(p=y,z=v,P[p].setStyle(N),c.hasLayer(P[p])||(c.addLayer(P[p]),!c.hasLayer(S[p])&&S[p]&&c.addLayer(S[p])),l("#polylines-legend form label input").each((function(o){l(this).click().click()})),""!=_[p][z]){l(".polygons-legend"+p+" .polygons-legend-scale").html("");for(var o=[],e=0;e<_[p][z].length;e++){var n=b[p][z],i=_[p][z][e],t=_[p][z][e+1],r=x(i);i=i?J(i):i,t=t?J(t):t,o.push('<i style="background:'+r+"; opacity: "+U(p,"_colorOpacity","0.7")+'"></i> '+i+(t&&n?"&ndash;"+t:n?"+":""))}l(".polygons-legend"+p+" .polygons-legend-scale").html(o.join("<br>")),l(".polygons-legend"+p+" .polygons-legend-scale").show(),A()}else l(".polygons-legend"+p).find(".polygons-legend-scale").css({margin:"0px",padding:"0px",border:"0px solid"})}function N(o){var e=o.properties[T[y][v][0].trim()];return"Point"==o.geometry.type?{radius:4,weight:1,opacity:1,color:x(e),fillOpacity:U(y,"_colorOpacity","0.7"),fillColor:"white"}:{weight:2,opacity:1,color:U(y,"_outlineColor","white"),dashArray:"3",fillOpacity:U(y,"_colorOpacity","0.7"),fillColor:x(e)}}function x(o){var e,n=b[y][v],i=L[y][v],t=_[y][v];if(n)for(e=i.length-1;o<t[e];)e-=1;else for(e=0;e<i.length-1&&o!=t[e];e++);return i[e]||(e=0),i[e]}function D(o,e){if(""!=R(y,"_popupProp")||"off"!=R(y,"_polygonDisplayImages")){var n="";for(i in props=k[y],props)if(""!=props[i]){n+=props[i][1]?props[i][1].trim():props[i][0].trim();var t=o.properties[props[i][0].trim()];n+=": <b>"+(t?J(t):t)+"</b><br>"}if("on"==R(y,"_polygonDisplayImages")&&o.properties.img&&(n+='<img src="'+o.properties.img+'">'),e.bindPopup(n),w[y]||w.push([]),""!==R(y,"_polygonLabel")){var l=r.marker(polylabel(e.feature.geometry.coordinates,1).reverse(),{icon:r.divIcon({className:"polygon-label"+y+" polygon-label",html:o.properties[R(y,"_polygonLabel")]})});w[y].push(l)}}}function M(o,t,a){var s,p;!function(o){for(var n in o){var i=o[n];e[i.Setting]=i.Customize}}(o),document.title=G("_mapTitle"),s=Z("_tileProvider","CartoDB.Positron"),r.tileLayer.provider(s,{maxZoom:19}).addTo(c),r.control.attribution({position:Z("_mapAttribution","bottomright")}).addTo(c);var d,g,u="";if(t&&t.length>0?(p=function(o){var e=[],i={};for(var t in o){var l=o[t].Group;l&&-1===e.indexOf(l)&&(e.push(l),n[l]=o[t]["Marker Icon"].indexOf(".")>0?o[t]["Marker Icon"]:o[t]["Marker Color"])}if(0===e.length)i=void 0;else for(var t in e){var a=e[t];i[a]=r.layerGroup(),i[a].addTo(c)}return i}(t),u=function(o,e){var n=[];for(var i in o){var t=o[i];console.log(t);var a=t["Custom Size"],s=a.indexOf("x")>0?[parseInt(a.split("x")[0]),parseInt(a.split("x")[1])]:[32,32],p=[s[0]/2,s[1]],d=t["Marker Icon"].indexOf(".")>0?r.icon({iconUrl:t["Marker Icon"],iconSize:s,iconAnchor:p}):r.icon({iconUrl:"/img/animap-marker-pin.png",iconSize:s,iconAnchor:p});if(""!==t.Latitude&&""!==t.Longitude){var g=r.marker([t.Latitude,t.Longitude],{icon:d}).bindPopup("<b>"+t.Name+"</b><br>"+(t.Image?'<img src="'+t.Image+'"><br>':"")+t.Description);void 0!==e&&1!==e.length&&g.addTo(e[t.Group]),n.push(g)}}var u=r.featureGroup(n),h="on"===G("_markercluster");if(void 0===e||0===e.length)c.addLayer(h?r.markerClusterGroup({chunkedLoading:!0}).addLayer(u).addTo(c):u);else{if(h){var m=r.markerClusterGroup.layerSupport();for(i in m.addTo(c),e)m.checkIn(e[i]),e[i].addTo(c)}var y="off"==G("_pointsLegendPos")?"topleft":G("_pointsLegendPos"),v=r.control.layers(null,e,{collapsed:!1,position:y});"off"!==G("_pointsLegendPos")&&(v.addTo(c),v._container.id="points-legend",v._container.className+=" ladder")}l("#points-legend").prepend('<h6 class="pointer">'+G("_pointsLegendTitle")+"</h6>"),""!=G("_pointsLegendIcon")&&l("#points-legend h6").prepend('<span class="legend-icon"><i class="fas '+G("_pointsLegendIcon")+'"></i></span>');var _="on"==G("_displayTable"),L=G("_tableColumns").split(",").map(Function.prototype.call,String.prototype.trim);if(_&&L.length>1){var b=Z("_tableHeight",40);(b<10||b>90)&&(b=40),l("#map").css("height",100-b+"vh"),c.invalidateSize();var P=G("_tableHeaderColor").split(",");function n(){var n=[];for(var t in o)c.hasLayer(e[o[t].Group])&&c.getBounds().contains(r.latLng(o[t].Latitude,o[t].Longitude))&&n.push(o[t]);var l=i(n);C.clear(),C.rows.add(l),C.draw()}function i(o){var e=[];for(var n in o){var i=[];for(var t in L)i.push(o[n][L[t]]);e.push(i)}return e}function t(){var o=[];for(var e in L)o.push({title:L[e]});return o}""!=P[0]&&(l("table.display").css("background-color",P[0]),P.length>=2&&l("table.display").css("color",P[1])),c.on("moveend",n),c.on("layeradd",n),c.on("layerremove",n);var C=l("#maptable").DataTable({paging:!1,scrollCollapse:!0,scrollY:"calc("+b+"vh - 40px)",info:!1,searching:!1,columns:t()})}return f=!0,u}(t,p)):f=!0,function(o){var e,n=c.getCenter().lat,i=!1,t=c.getCenter().lng,l=!1,a=12,s=!1;""!==G("_initLat")&&(n=G("_initLat"),i=!0),""!==G("_initLon")&&(t=G("_initLon"),l=!0),""!==G("_initZoom")&&(a=parseInt(G("_initZoom")),s=!0),e=i&&l||!o?r.latLng(n,t):o.getBounds().getCenter(),!s&&o&&(a=c.getBoundsZoom(o.getBounds())),c.setView(e,a)}(u),a&&a.length>0?function(o){if(o&&0!=o.length){var e="off"==G("_polylinesLegendPos")?"topleft":G("_polylinesLegendPos"),n=r.control.layers(null,null,{position:e,collapsed:!1});for(i=0;i<o.length;i++)l.getJSON(o[i]["GeoJSON URL"],function(e){return function(i){var t=[];for(var a in i.features)t.push(i.features[a].geometry.coordinates);for(var a in t)for(var s in t[a])t[a][s].reverse(),3==t[a][s].length&&t[a][s].shift();var p=r.polyline(t,{color:""==o[e].Color?"grey":o[e].Color,weight:Z("_polylinesWeight",2),pane:"shadowPane"}).addTo(c);if(o[e].Description&&""!=o[e].Description&&p.bindPopup(o[e].Description),n.addOverlay(p,'<i class="color-line" style="background-color:'+o[e].Color+'"></i> '+o[e]["Display Name"]),0==e&&(n._container&&(n._container.id="polylines-legend",n._container.className+=" ladder"),""!=G("_polylinesLegendTitle")&&(l("#polylines-legend").prepend('<h6 class="pointer">'+G("_polylinesLegendTitle")+"</h6>"),""!=G("_polylinesLegendIcon")&&l("#polylines-legend h6").prepend('<span class="legend-icon"><i class="fas '+G("_polylinesLegendIcon")+'"></i></span>'),"in polylines legend"==G("_mapTitleDisplay")))){var d="<h3>"+G("_mapTitle")+"</h3>",g="<h6>"+G("_mapSubtitle")+"</h6>";l("#polylines-legend").prepend(d+g)}o.length==e+1&&(m=!0)}}(i));"off"!==G("_polylinesLegendPos")&&n.addTo(c)}}(a):m=!0,R(0,"_polygonsGeojsonURL")&&R(0,"_polygonsGeojsonURL").trim()?O(0):h=!0,"off"!==G("_mapSearch")){var y=r.Control.geocoder({expand:"click",position:G("_mapSearch"),geocoder:r.Control.Geocoder.nominatim({geocodingQueryParams:{viewbox:"",bounded:1}})}).addTo(c);function o(){var o=c.getBounds();y.options.geocoder.options.geocodingQueryParams.viewbox=[o._southWest.lng,o._southWest.lat,o._northEast.lng,o._northEast.lat].join(",")}c.on("moveend",o)}"off"!==G("_mapMyLocation")&&r.control.locate({keepCurrentZoomLevel:!0,returnToPrevBounds:!0,position:G("_mapMyLocation")}).addTo(c),"off"!==G("_mapZoom")&&r.control.zoom({position:G("_mapZoom")}).addTo(c),c.on("zoomend",(function(){A()})),function(){var o=G("_mapTitleDisplay");if("off"!==o){var e='<h3 class="pointer">'+G("_mapTitle")+"</h3>",n="<h5>"+G("_mapSubtitle")+"</h5>";"topleft"==o?l("div.leaflet-top").prepend('<div class="map-title leaflet-bar leaflet-control leaflet-control-custom">'+e+n+"</div>"):"topcenter"==o&&(l("#map").append('<div class="div-center"></div>'),l(".div-center").append('<div class="map-title leaflet-bar leaflet-control leaflet-control-custom">'+e+n+"</div>")),l(".map-title h3").click((function(){location.reload()}))}}(),d=l(".leaflet-control-attribution")[0].innerHTML,G("_authorName"),G("_authorURL"),g="Code",G("_codeCredit")&&(g+=" by "+G("_codeCredit")),g+=" with ",l(".leaflet-control-attribution")[0].innerHTML=g+d,l("#points-legend label span").each((function(o){var e=l(this).text().trim(),i=n[e].indexOf(".")>0?'<img src="'+n[e]+'" class="markers-legend-icon">':'&nbsp;<i class="fas fa-map-marker" style="color: '+n[e]+'"></i>';l(this).prepend(i)})),function o(){if(f&&m&&h){for(i in l(".ladder h6").append('<span class="legend-arrow"><i class="fas fa-chevron-down"></i></span>'),l(".ladder h6").addClass("minimize"),C)""!=R(i,"_polygonsLegendIcon")&&l(".polygons-legend"+i+" h6").prepend('<span class="legend-icon"><i class="fas '+R(i,"_polygonsLegendIcon")+'"></i></span>');l(".ladder h6").click((function(){l(this).hasClass("minimize")?(l(".ladder h6").addClass("minimize"),l(".legend-arrow i").removeClass("fa-chevron-up").addClass("fa-chevron-down"),l(this).removeClass("minimize").parent().find(".legend-arrow i").removeClass("fa-chevron-down").addClass("fa-chevron-up")):(l(this).addClass("minimize"),l(this).parent().find(".legend-arrow i").removeClass("fa-chevron-up").addClass("fa-chevron-down"))})),l(".ladder h6").first().click(),l("#map").css("visibility","visible"),l(".loader").hide(),""!=G("_introPopupText")&&function(o,e){if(window.matchMedia("only screen and (max-width: 760px)").matches)return l("body").append('<div id="mobile-intro-popup"><p>'+o+'</p><div id="mobile-intro-popup-close"><i class="fas fa-times"></i></div></div>'),void l("#mobile-intro-popup-close").click((function(){l("#mobile-intro-popup").hide()}));r.popup({className:"intro-popup"}).setLatLng(e).setContent(o).openOn(c)}(G("_introPopupText"),c.getCenter()),A()}else setTimeout(o,50)}();var v=G("_googleAnalytics");if(v&&v.length>=10){var _=document.createElement("script");function o(){dataLayer.push(arguments)}_.setAttribute("src","https://www.googletagmanager.com/gtag/js?id="+v),document.head.appendChild(_),window.dataLayer=window.dataLayer||[],o("js",new Date),o("config",v)}}function A(){for(i in w)c.getZoom()<=U(i,"_polygonLabelZoomLevel",9)?l(".polygon-label"+i).hide():"-1"!=l(".polygons-legend"+i+" input[name=prop]:checked").val()&&l(".polygon-label"+i).show()}function G(o){return e[g[o]]}function R(o,e){return!!u[o]&&u[o][g[e]]}function Z(o,e){return(o=G(o))&&""!==o.trim()?o:e}function U(o,e,n){return(e=R(o,e))&&""!==e.trim()?e:n}function H(o){var e={};for(var n in o){var i=o[n];e[i.Setting]=i.Customize}u.push(e)}function J(o){for(;/(\d+)(\d{3})/.test(o.toString());)o=o.toString().replace(/(\d+)(\d{3})/,"$1,$2");return o}l.ajax({url:"./csv/Options.csv",type:"HEAD",error:function(){var o=function(o){return a.parse(a.unparse(o[0].values),{header:!0}).data},e="https://sheets.googleapis.com/v4/spreadsheets/",n=s.indexOf("/d/")>0?s.split("/d/")[1].split("/")[0]:s;l.getJSON(e+n+"?key="+d).then((function(i){var t=i.sheets.map((function(o){return o.properties.title}));0===t.length||t.includes("Options"),l.when(l.getJSON(e+n+"/values/Options?key="+d),l.getJSON(e+n+"/values/Points?key="+d),l.getJSON(e+n+"/values/Polylines?key="+d)).done((function(i,r,a){var s=t.filter((function(o){return 0===o.indexOf("Polygons")})),p=function(t){0===t.length?M(o(i),o(r),o(a)):l.getJSON(e+n+"/values/"+t.shift()+"?key="+d,(function(e){H(o([e])),p(t)}))};p(s)}))}))},success:function(){var o=function(o){return a.parse(o[0],{header:!0}).data};l.when(l.get("./csv/Options.csv"),l.get("./csv/Points.csv"),l.get("./csv/Polylines.csv")).done((function(e,n,i){!function t(r){l.get("./csv/Polygons"+(0===r?"":r)+".csv",(function(e){H(o([e])),t(r+1)})).fail((function(){M(o(e),o(n),o(i))}))}(0)}))}})}))},385:(o,e,n)=>{o.exports=n.p+"img/animap-marker-pin.png"},278:(o,e,n)=>{o.exports=n.p+"img/animap.png"}},o=>{o.O(0,[5],(()=>(138,o(o.s=138)))),o.O()}]);