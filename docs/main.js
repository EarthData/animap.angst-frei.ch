"use strict";(self.webpackChunkanimap_angst_frei_ch=self.webpackChunkanimap_angst_frei_ch||[]).push([[179],{138:(o,e,n)=>{n(978),n(732),n(652),n(817),n(687),n(408),n(292),n(920),n(504),n(278),n(385);var r=n(243),a=n(755),s=n(460),d="https://docs.google.com/spreadsheets/d/1re8XrYP6eRMHGXMkAzEstO_VAQVw8sbIOhwFjy3Eyxg/edit#gid=0",g="AIzaSyA5IUHNyPZvWuCMTqvI4DJ2ygqDO5_t5Is",u=r.map("map",{preferCanvas:!0,fullscreenControl:{pseudoFullscreen:!1,position:"bottomleft"},attributionControl:!1,zoomControl:!1,scrollWheelZoom:!0,tap:!1}).setView([41.76,-72.69],11),f={notesSheetName:"Notes",optionsSheetName:"Options",pointsSheetName:"Points",polygonsSheetName:"Polygons",polylinesSheetName:"Polylines",_mapTitle:"Map Title",_mapSubtitle:"Map Subtitle",_mapTitleDisplay:"Display Title",_authorName:"Author Name",_authorURL:"Author Email or Website",_codeCredit:"Author Code Credit",_githubRepo:"Author Code Repo",_googleAnalytics:"Google Analytics Tracking ID",_tileProvider:"Basemap Tiles",_markercluster:"Cluster Markers",_introPopupText:"Intro Popup Text",_initZoom:"Initial Zoom",_initLat:"Initial Center Latitude",_initLon:"Initial Center Longitude",_mapSearch:"Search Button",_mapSearchCircleRadius:"Search Radius",_mapSearchZoom:"Search Results Zoom Level",_mapZoom:"Zoom Controls",_mapMyLocation:"Show My Location",_mapAttribution:"Credits and Attribution",_pointsLegendTitle:"Point Legend Title",_pointsLegendPos:"Point Legend Position",_pointsLegendIcon:"Point Legend Icon",_displayTable:"Display Table",_tableHeight:"Table Height",_tableColumns:"Table Columns",_tableHeaderColor:"Table Header Color",_polylinesLegendTitle:"Polyline Legend Title",_polylinesLegendPos:"Polyline Legend Position",_polylinesLegendIcon:"Polyline Legend Icon",_polylinesWeight:"Polyline Thickness",_polygonsLegendTitle:"Polygon Legend Title",_polygonsLegendPosition:"Polygon Legend Position",_polygonsLegendIcon:"Polygon Legend Icon",_polygonsGeojsonURL:"Polygon GeoJSON URL",_popupProp:"Property Popups, Labels",_polygonLayers:"Polygon Properties, Labels",_bucketDivisors:"Property Ranges",_colorScheme:"Property Range Color Palette",_colorOpacity:"Polygon Color Opacity",_outlineColor:"Polygon Outline Color",_bucketColors:"Property Range Manual Colors",_polygonDisplayImages:"Show Images When Available",_polygonLabel:"Show Polygon Labels",_polygonLabelZoomLevel:"Show Polygon Labels at Zoom Level",_polygonShowOnStart:"Show Polygon Data on Start"};a(window).on("load",(function(){var o,e={},n={},h=[],m=!1,y=!1,v=!1,_=0,L=0,b=[],P=[],C=[],T=[],k=[],S=[],w=[],O=[],I=[];function N(e){if(e<h.length&&U(e,"_polygonsGeojsonURL").trim()){_=e;var n=U(e,"_popupProp").split(";");for(i in n)n[i]=n[i].split(",");w.push(n),a.getJSON(U(e,"_polygonsGeojsonURL").trim(),(function(o){geoJsonLayer=r.geoJson(o,{onEachFeature:A,pointToLayer:function(o,e){return r.circleMarker(e,{className:"geojson-point-marker"})}}),T.push(geoJsonLayer),N(e+1)}))}else!function(){for(var e=0;e<h.length&&U(e,"_polygonsGeojsonURL").trim();){for(i in isNumerical=[],divisors=[],colors=[],polygonLayers=U(e,"_polygonLayers").split(";"),polygonLayers)polygonLayers[i]=polygonLayers[i].split(",");if(divisors=U(e,"_bucketDivisors").split(";"),divisors.length!=polygonLayers.length)return void alert("Error in Polygons: The number of sets of divisors has to match the number of properties");for(colors=U(e,"_bucketColors").split(";"),i=0;i<divisors.length;i++){for(divisors[i]=divisors[i].split(","),j=0;j<divisors[i].length;j++)divisors[i][j]=divisors[i][j].trim();colors[i]?colors[i]=colors[i].split(","):colors[i]=[]}for(i=0;i<divisors.length;i++){if(0==divisors[i].length)return void alert("Error in Polygons: The number of divisors should be > 0");if(0==colors[i].length)for(colors[i]=palette(J(e,"_colorScheme","tol-sq"),divisors[i].length),j=0;j<colors[i].length;j++)colors[i][j]="#"+colors[i][j].trim();else if(divisors[i].length!=colors[i].length)return void alert("Error in Polygons: The number of divisors should match the number of colors")}for(i=0;i<divisors.length;i++)if(isNaN(parseFloat(divisors[i][0].trim())))isNumerical[i]=!1;else for(isNumerical[i]=!0,j=0;j<divisors[i].length;j++)divisors[i][j]=parseFloat(divisors[i][j].trim());b.push(divisors),P.push(colors),C.push(isNumerical),S.push(polygonLayers);var n=J(e,"_polygonsLegendPosition","off");(o=r.control({position:"off"==n?"topleft":n})).onAdd=function(o){var n='<h6 class="pointer">'+U(e,"_polygonsLegendTitle")+"</h6>";for(i in n+="<form>",polygonLayers){var t=polygonLayers[i][1]?polygonLayers[i][1].trim():polygonLayers[i][0].trim();n+='<label><input type="radio" name="prop" value="'+e+";"+i+'"> ',n+=(t=""==t?"On":t)+"</label><br>"}n+='<label><input type="radio" name="prop" value="'+e+';-1"> Off</label></form><div class="polygons-legend-scale">';var l=r.DomUtil.create("div","leaflet-control leaflet-control-custom leaflet-bar ladder polygons-legend"+e);return l.innerHTML=n,l.innerHTML+="</div>",l},o.addTo(u),"off"==U(e,"_polygonsLegendPosition")&&a(".polygons-legend"+e).css("display","none"),k.push(o),e++}for(var i in I){var l=r.featureGroup(I[i]);O.push(l)}for(a('.ladder input:radio[name="prop"]').change((function(){_=parseInt(a(this).val().split(";")[0]),-1==(L=parseInt(a(this).val().split(";")[1]))?(a(".polygons-legend"+_).find(".polygons-legend-scale").hide(),u.hasLayer(T[_])&&(u.removeLayer(T[_]),u.hasLayer(O[_])&&u.removeLayer(O[_]))):x()})),t=0;t<e;t++)"on"==U(t,"_polygonShowOnStart")?a('.ladder input:radio[name="prop"][value="'+t+';0"]').click():a('.ladder input:radio[name="prop"][value="'+t+';-1"]').click();a(".polygons-legend-merged h6").eq(0).click().click(),y=!0}()}function x(){if(p=_,z=L,T[p].setStyle(D),u.hasLayer(T[p])||(u.addLayer(T[p]),!u.hasLayer(O[p])&&O[p]&&u.addLayer(O[p])),a("#polylines-legend form label input").each((function(o){a(this).click().click()})),""!=b[p][z]){a(".polygons-legend"+p+" .polygons-legend-scale").html("");for(var o=[],e=0;e<b[p][z].length;e++){var n=C[p][z],i=b[p][z][e],t=b[p][z][e+1],l=M(i);i=i?B(i):i,t=t?B(t):t,o.push('<i style="background:'+l+"; opacity: "+J(p,"_colorOpacity","0.7")+'"></i> '+i+(t&&n?"&ndash;"+t:n?"+":""))}a(".polygons-legend"+p+" .polygons-legend-scale").html(o.join("<br>")),a(".polygons-legend"+p+" .polygons-legend-scale").show(),R()}else a(".polygons-legend"+p).find(".polygons-legend-scale").css({margin:"0px",padding:"0px",border:"0px solid"})}function D(o){var e=o.properties[S[_][L][0].trim()];return"Point"==o.geometry.type?{radius:4,weight:1,opacity:1,color:M(e),fillOpacity:J(_,"_colorOpacity","0.7"),fillColor:"white"}:{weight:2,opacity:1,color:J(_,"_outlineColor","white"),dashArray:"3",fillOpacity:J(_,"_colorOpacity","0.7"),fillColor:M(e)}}function M(o){var e,n=C[_][L],i=P[_][L],t=b[_][L];if(n)for(e=i.length-1;o<t[e];)e-=1;else for(e=0;e<i.length-1&&o!=t[e];e++);return i[e]||(e=0),i[e]}function A(o,e){if(""!=U(_,"_popupProp")||"off"!=U(_,"_polygonDisplayImages")){var n="";for(i in props=w[_],props)if(""!=props[i]){n+=props[i][1]?props[i][1].trim():props[i][0].trim();var t=o.properties[props[i][0].trim()];n+=": <b>"+(t?B(t):t)+"</b><br>"}if("on"==U(_,"_polygonDisplayImages")&&o.properties.img&&(n+='<img src="'+o.properties.img+'">'),e.bindPopup(n),I[_]||I.push([]),""!==U(_,"_polygonLabel")){var l=r.marker(polylabel(e.feature.geometry.coordinates,1).reverse(),{icon:r.divIcon({className:"polygon-label"+_+" polygon-label",html:o.properties[U(_,"_polygonLabel")]})});I[_].push(l)}}}function G(o,t,s){var p,d;!function(o){for(var n in o){var i=o[n];e[i.Setting]=i.Customize}}(o),document.title=Z("_mapTitle"),p=H("_tileProvider","CartoDB.Positron"),r.tileLayer.provider(p,{maxZoom:19}).addTo(u),r.control.attribution({position:H("_mapAttribution","bottomright")}).addTo(u);var g,f,h="";if(t&&t.length>0?(d=function(o){var e=[],i={};for(var t in o){var l=o[t].Group;l&&-1===e.indexOf(l)&&(e.push(l),n[l]=o[t]["Marker Icon"].indexOf(".")>0?o[t]["Marker Icon"]:o[t]["Marker Color"])}if(0===e.length)i=void 0;else for(var t in e){var a=e[t];i[a]=r.layerGroup(),i[a].addTo(u)}return i}(t),h=function(o,e){var n=[];for(var i in o){var t=o[i],l=t["Custom Size"],s=l.indexOf("x")>0?[parseInt(l.split("x")[0]),parseInt(l.split("x")[1])]:[32,32],p=[s[0]/2,s[1]],d=t["Marker Icon"].indexOf(".")>0?r.icon({iconUrl:t["Marker Icon"],iconSize:s,iconAnchor:p}):r.icon({iconUrl:"/img/animap-marker-pin.png",iconSize:s,iconAnchor:p});if(""!==t.Latitude&&""!==t.Longitude){var c=r.marker([t.Latitude,t.Longitude],{icon:d}).bindPopup("<b>"+t.Name+"</b><br>"+(t.Image?'<img src="'+t.Image+'"><br>':"")+t.Description);void 0!==e&&1!==e.length&&c.addTo(e[t.Group]),n.push(c)}}var g=r.featureGroup(n),f="on"===Z("_markercluster");if(void 0===e||0===e.length)u.addLayer(f?r.markerClusterGroup({chunkedLoading:!0}).addLayer(g).addTo(u):g);else{if(f){var h=r.markerClusterGroup.layerSupport();for(i in h.addTo(u),e)h.checkIn(e[i]),e[i].addTo(u)}var y="off"==Z("_pointsLegendPos")?"topleft":Z("_pointsLegendPos"),v=r.control.layers(null,e,{collapsed:!1,position:y});"off"!==Z("_pointsLegendPos")&&(v.addTo(u),v._container.id="points-legend",v._container.className+=" ladder")}a("#points-legend").prepend('<h6 class="pointer">'+Z("_pointsLegendTitle")+"</h6>"),""!=Z("_pointsLegendIcon")&&a("#points-legend h6").prepend('<span class="legend-icon"><i class="fas '+Z("_pointsLegendIcon")+'"></i></span>');var _="on"==Z("_displayTable"),L=Z("_tableColumns").split(",").map(Function.prototype.call,String.prototype.trim);if(_&&L.length>1){var b=H("_tableHeight",40);(b<10||b>90)&&(b=40),a("#map").css("height",100-b+"vh"),u.invalidateSize();var P=Z("_tableHeaderColor").split(",");function n(){var n=[];for(i in o)u.hasLayer(e[o[i].Group])&&u.getBounds().contains(r.latLng(o[i].Latitude,o[i].Longitude))&&n.push(o[i]);var l=t(n);C.clear(),C.rows.add(l),C.draw()}function t(o){var e=[];for(var n in o){var i=[];for(var t in L)i.push(o[n][L[t]]);e.push(i)}return e}function l(){var o=[];for(var e in L)o.push({title:L[e]});return o}""!=P[0]&&(a("table.display").css("background-color",P[0]),P.length>=2&&a("table.display").css("color",P[1])),u.on("moveend",n),u.on("layeradd",n),u.on("layerremove",n);var C=a("#maptable").DataTable({paging:!1,scrollCollapse:!0,scrollY:"calc("+b+"vh - 40px)",info:!1,searching:!1,columns:l()})}return m=!0,g}(t,d)):m=!0,function(o){var e,n=u.getCenter().lat,i=!1,t=u.getCenter().lng,l=!1,a=12,s=!1;""!==Z("_initLat")&&(n=Z("_initLat"),i=!0),""!==Z("_initLon")&&(t=Z("_initLon"),l=!0),""!==Z("_initZoom")&&(a=parseInt(Z("_initZoom")),s=!0),e=i&&l||!o?r.latLng(n,t):o.getBounds().getCenter(),!s&&o&&(a=u.getBoundsZoom(o.getBounds())),u.setView(e,a)}(h),s&&s.length>0?function(o){if(o&&0!=o.length){var e="off"==Z("_polylinesLegendPos")?"topleft":Z("_polylinesLegendPos"),n=r.control.layers(null,null,{position:e,collapsed:!1});for(i=0;i<o.length;i++)a.getJSON(o[i]["GeoJSON URL"],function(e){return function(i){for(l in latlng=[],i.features)latlng.push(i.features[l].geometry.coordinates);for(l in latlng)for(c in latlng[l])latlng[l][c].reverse(),3==latlng[l][c].length&&latlng[l][c].shift();if(line=r.polyline(latlng,{color:""==o[e].Color?"grey":o[e].Color,weight:H("_polylinesWeight",2),pane:"shadowPane"}).addTo(u),o[e].Description&&""!=o[e].Description&&line.bindPopup(o[e].Description),n.addOverlay(line,'<i class="color-line" style="background-color:'+o[e].Color+'"></i> '+o[e]["Display Name"]),0==e&&(n._container&&(n._container.id="polylines-legend",n._container.className+=" ladder"),""!=Z("_polylinesLegendTitle")&&(a("#polylines-legend").prepend('<h6 class="pointer">'+Z("_polylinesLegendTitle")+"</h6>"),""!=Z("_polylinesLegendIcon")&&a("#polylines-legend h6").prepend('<span class="legend-icon"><i class="fas '+Z("_polylinesLegendIcon")+'"></i></span>'),"in polylines legend"==Z("_mapTitleDisplay")))){var t="<h3>"+Z("_mapTitle")+"</h3>",s="<h6>"+Z("_mapSubtitle")+"</h6>";a("#polylines-legend").prepend(t+s)}o.length==e+1&&(v=!0)}}(i));"off"!==Z("_polylinesLegendPos")&&n.addTo(u)}}(s):v=!0,U(0,"_polygonsGeojsonURL")&&U(0,"_polygonsGeojsonURL").trim()?N(0):y=!0,"off"!==Z("_mapSearch")){var _=r.Control.geocoder({expand:"click",position:Z("_mapSearch"),geocoder:r.Control.Geocoder.nominatim({geocodingQueryParams:{viewbox:"",bounded:1}})}).addTo(u);function o(){var o=u.getBounds();_.options.geocoder.options.geocodingQueryParams.viewbox=[o._southWest.lng,o._southWest.lat,o._northEast.lng,o._northEast.lat].join(",")}u.on("moveend",o)}"off"!==Z("_mapMyLocation")&&r.control.locate({keepCurrentZoomLevel:!0,returnToPrevBounds:!0,position:Z("_mapMyLocation")}).addTo(u),"off"!==Z("_mapZoom")&&r.control.zoom({position:Z("_mapZoom")}).addTo(u),u.on("zoomend",(function(){R()})),function(){var o=Z("_mapTitleDisplay");if("off"!==o){var e='<h3 class="pointer">'+Z("_mapTitle")+"</h3>",n="<h5>"+Z("_mapSubtitle")+"</h5>";"topleft"==o?a("div.leaflet-top").prepend('<div class="map-title leaflet-bar leaflet-control leaflet-control-custom">'+e+n+"</div>"):"topcenter"==o&&(a("#map").append('<div class="div-center"></div>'),a(".div-center").append('<div class="map-title leaflet-bar leaflet-control leaflet-control-custom">'+e+n+"</div>")),a(".map-title h3").click((function(){location.reload()}))}}(),g=a(".leaflet-control-attribution")[0].innerHTML,Z("_authorName"),Z("_authorURL"),f="Code",Z("_codeCredit")&&(f+=" by "+Z("_codeCredit")),f+=" with ",a(".leaflet-control-attribution")[0].innerHTML=f+g,a("#points-legend label span").each((function(o){var e=a(this).text().trim(),i=n[e].indexOf(".")>0?'<img src="'+n[e]+'" class="markers-legend-icon">':'&nbsp;<i class="fas fa-map-marker" style="color: '+n[e]+'"></i>';a(this).prepend(i)})),function o(){if(m&&v&&y){for(i in a(".ladder h6").append('<span class="legend-arrow"><i class="fas fa-chevron-down"></i></span>'),a(".ladder h6").addClass("minimize"),k)""!=U(i,"_polygonsLegendIcon")&&a(".polygons-legend"+i+" h6").prepend('<span class="legend-icon"><i class="fas '+U(i,"_polygonsLegendIcon")+'"></i></span>');a(".ladder h6").click((function(){a(this).hasClass("minimize")?(a(".ladder h6").addClass("minimize"),a(".legend-arrow i").removeClass("fa-chevron-up").addClass("fa-chevron-down"),a(this).removeClass("minimize").parent().find(".legend-arrow i").removeClass("fa-chevron-down").addClass("fa-chevron-up")):(a(this).addClass("minimize"),a(this).parent().find(".legend-arrow i").removeClass("fa-chevron-up").addClass("fa-chevron-down"))})),a(".ladder h6").first().click(),a("#map").css("visibility","visible"),a(".loader").hide(),""!=Z("_introPopupText")&&function(o,e){if(window.matchMedia("only screen and (max-width: 760px)").matches)return a("body").append('<div id="mobile-intro-popup"><p>'+o+'</p><div id="mobile-intro-popup-close"><i class="fas fa-times"></i></div></div>'),void a("#mobile-intro-popup-close").click((function(){a("#mobile-intro-popup").hide()}));r.popup({className:"intro-popup"}).setLatLng(e).setContent(o).openOn(u)}(Z("_introPopupText"),u.getCenter()),R()}else setTimeout(o,50)}();var L=Z("_googleAnalytics");if(L&&L.length>=10){var b=document.createElement("script");function o(){dataLayer.push(arguments)}b.setAttribute("src","https://www.googletagmanager.com/gtag/js?id="+L),document.head.appendChild(b),window.dataLayer=window.dataLayer||[],o("js",new Date),o("config",L)}}function R(){for(i in I)u.getZoom()<=J(i,"_polygonLabelZoomLevel",9)?a(".polygon-label"+i).hide():"-1"!=a(".polygons-legend"+i+" input[name=prop]:checked").val()&&a(".polygon-label"+i).show()}function Z(o){return e[f[o]]}function U(o,e){return!!h[o]&&h[o][f[e]]}function H(o,e){return(o=Z(o))&&""!==o.trim()?o:e}function J(o,e,n){return(e=U(o,e))&&""!==e.trim()?e:n}function E(o){var e={};for(var n in o){var i=o[n];e[i.Setting]=i.Customize}h.push(e)}function B(o){for(;/(\d+)(\d{3})/.test(o.toString());)o=o.toString().replace(/(\d+)(\d{3})/,"$1,$2");return o}a.ajax({url:"./csv/Options.csv",type:"HEAD",error:function(){var o=function(o){return s.parse(s.unparse(o[0].values),{header:!0}).data},e="https://sheets.googleapis.com/v4/spreadsheets/",n=d.indexOf("/d/")>0?d.split("/d/")[1].split("/")[0]:d;a.getJSON(e+n+"?key="+g).then((function(i){var t=i.sheets.map((function(o){return o.properties.title}));0===t.length||t.includes("Options"),a.when(a.getJSON(e+n+"/values/Options?key="+g),a.getJSON(e+n+"/values/Points?key="+g),a.getJSON(e+n+"/values/Polylines?key="+g)).done((function(i,l,r){var s=t.filter((function(o){return 0===o.indexOf("Polygons")})),p=function(t){0===t.length?G(o(i),o(l),o(r)):a.getJSON(e+n+"/values/"+t.shift()+"?key="+g,(function(e){E(o([e])),p(t)}))};p(s)}))}))},success:function(){var o=function(o){return s.parse(o[0],{header:!0}).data};a.when(a.get("./csv/Options.csv"),a.get("./csv/Points.csv"),a.get("./csv/Polylines.csv")).done((function(e,n,i){!function t(l){a.get("./csv/Polygons"+(0===l?"":l)+".csv",(function(e){E(o([e])),t(l+1)})).fail((function(){G(o(e),o(n),o(i))}))}(0)}))}})}))},385:(o,e,n)=>{o.exports=n.p+"img/animap-marker-pin.png"},278:(o,e,n)=>{o.exports=n.p+"img/animap.png"}},o=>{o.O(0,[5],(()=>(138,o(o.s=138)))),o.O()}]);